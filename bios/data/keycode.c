#include "data/keycode.h"
#include "attrib.h"

// Written according to "System BIOS for IBM PC/XT/AT Computers and Compatibles"
__section(".legacy.kbdtbl")
const uint16_t translation_table[][4] =
{
//    Normal  Shift   Ctrl    Alt          Key    KeySh Scan
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // No key
	{ 0x011B, 0x011B, 0x011B, 0x0000 }, // ESC
	{ 0x0231, 0x0221, 0x0000, 0x7800 }, // 1      !	    02h
	{ 0x0332, 0x0340, 0x0300, 0x7900 },	// 2      @	    03h
	{ 0x0433, 0x0423, 0x0000, 0x7A00 },	// 3      #	    04h
	{ 0x0534, 0x0524, 0x0000, 0x7B00 },	// 4      $	    05h
	{ 0x0635, 0x0625, 0x0000, 0x7C00 },	// 5      %	    06h
	{ 0x0736, 0x075E, 0x071E, 0x7D00 },	// 6      ^     07h
	{ 0x0837, 0x0826, 0x0000, 0x7E00 },	// 7      &     08h
	{ 0x0938, 0x092A, 0x0000, 0x7F00 },	// 8      *     09h
	{ 0x0A39, 0x0A28, 0x0000, 0x8000 },	// 9      (	    0Ah
	{ 0x0B30, 0x0B29, 0x0000, 0x8100 },	// 0      )	    0Bh
	{ 0x0C2D, 0x0C5F, 0x0C1F, 0x8200 },	// -      _	    0Ch
	{ 0x0D3D, 0x0D2B, 0x0000, 0x8300 },	// =      +	    0Dh
	{ 0x0E08, 0x0E08, 0x0E7F, 0x0000 },	// Backspace    0Eh
	{ 0x0F09, 0x0F00, 0x0000, 0x0000 },	// Tab		    0Fh
	{ 0x1071, 0x1051, 0x1011, 0x1000 },	// q      Q	    10h
	{ 0x1177, 0x1157, 0x1117, 0x1100 }, // w      W	    11h
	{ 0x1265, 0x1245, 0x1205, 0x1200 }, // e      E	    12h
	{ 0x1372, 0x1352, 0x1312, 0x1300 }, // r      R	    13h
	{ 0x1474, 0x1454, 0x1414, 0x1400 }, // t      T	    14h
	{ 0x1579, 0x1559, 0x1519, 0x1500 }, // y      Y	    15h
	{ 0x1675, 0x1655, 0x1615, 0x1600 }, // u      U	    16h
	{ 0x1769, 0x1749, 0x1709, 0x1700 }, // i      I	    17h
	{ 0x186F, 0x184F, 0x180F, 0x1800 }, // o      O	    18h
	{ 0x1970, 0x1950, 0x1910, 0x1900 }, // p      P	    19h
	{ 0x1A5B, 0x1A7B, 0x1A1B, 0x0000 }, // [      {	    1Ah
	{ 0x1B5D, 0x1B7D, 0x1B1D, 0x0000 }, // ]      }	    1Bh
	{ 0x1C0D, 0x1C0D, 0x1C0A, 0x0000 }, // Enter        1Ch
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // Ctrl		    1Dh
	{ 0x1E61, 0x1E41, 0x1E01, 0x1E00 }, // a      A	    1Eh
	{ 0x1F73, 0x1F53, 0x1F13, 0x1F00 }, // s      S	    1Fh
	{ 0x2064, 0x2044, 0x2004, 0x2000 }, // d      D	    20h
	{ 0x2166, 0x2146, 0x2106, 0x2100 }, // f      F	    21h
	{ 0x2267, 0x2247, 0x2207, 0x2200 }, // g      G	    22h
	{ 0x2368, 0x2348, 0x2308, 0x2300 }, // h      H	    23h
	{ 0x246A, 0x244A, 0x240A, 0x2400 }, // j      J	    24h
	{ 0x256B, 0x254B, 0x250B, 0x2500 }, // k      K	    25h
	{ 0x266C, 0x264C, 0x260C, 0x2600 }, // l      L	    26h
	{ 0x273B, 0x273A, 0x0000, 0x0000 }, // ;      :	    27h
	{ 0x2827, 0x2822, 0x0000, 0x0000 }, // '      "	    28h
	{ 0x2960, 0x297E, 0x0000, 0x0000 }, // `      ~	    29h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // LShift	    2Ah
	{ 0x2B5C, 0x2B7C, 0x2B1C, 0x0000 }, // \      |	    2Bh
	{ 0x2C7A, 0x2C5A, 0x2C1A, 0x2C00 }, // z      Z	    2Ch
	{ 0x2D78, 0x2D58, 0x2D18, 0x2D00 }, // x      X	    2Dh
	{ 0x2E63, 0x2E43, 0x2E03, 0x2E00 }, // c      C	    2Eh
	{ 0x2F76, 0x2F56, 0x2F16, 0x2F00 }, // v      V	    2Fh
	{ 0x3062, 0x3042, 0x3002, 0x3000 }, // b      B	    30h
	{ 0x316E, 0x314E, 0x310E, 0x3100 }, // n      N	    31h
	{ 0x326D, 0x324D, 0x320D, 0x3200 }, // m      M	    32h
	{ 0x332C, 0x333C, 0x0000, 0x0000 }, // ,      <	    33h
	{ 0x342E, 0x343E, 0x0000, 0x0000 }, // .      >	    34h
	{ 0x352F, 0x353F, 0x0000, 0x0000 }, // /      ?	    35h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // RShift	    36h
	{ 0x372A, 0x372A, 0x0000, 0x0000 }, // *      PrtSc 37h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // Alt		    38h
	{ 0x3920, 0x3920, 0x3920, 0x3920 },	// Space        39h
	{ 0x0000, 0x0000, 0x0000, 0x0000 },	// Capslock     3Ah
	{ 0x3B00, 0x5400, 0x5E00, 0x6800 }, // F1	  	    3Bh
	{ 0x3C00, 0x5500, 0x5F00, 0x6900 }, // F2	  	    3Ch
	{ 0x3D00, 0x5600, 0x6000, 0x6A00 }, // F3	  	    3Dh
	{ 0x3E00, 0x5700, 0x6100, 0x6B00 }, // F4	  	    3Eh
	{ 0x3F00, 0x5800, 0x6200, 0x6C00 }, // F5	  	    3Fh
	{ 0x4000, 0x5900, 0x6300, 0x6D00 }, // F6	  	    40h
	{ 0x4100, 0x5A00, 0x6400, 0x6E00 }, // F7		    41h
	{ 0x4200, 0x5B00, 0x6500, 0x6F00 }, // F8		    42h
	{ 0x4300, 0x5C00, 0x6600, 0x7000 }, // F9		    43h
	{ 0x4400, 0x5D00, 0x6700, 0x7100 }, // F10	  	    44h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // NumLock	    45h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // ScrollLock   46h
	{ 0x4700, 0x4737, 0x7700, 0x0000 }, // Home    7	47h
	{ 0x4800, 0x4838, 0x0000, 0x0000 }, // Up      8	48h
	{ 0x4900, 0x4939, 0x8400, 0x0000 }, // PgUp    9	49h
	{ 0x4A2D, 0x4A2D, 0x0000, 0x0000 }, // Gray -       4Ah
	{ 0x4B00, 0x4B34, 0x7300, 0x0000 }, // Left    4	4Bh
	{ 0x4C00, 0x4C35, 0x0000, 0x0000 }, // Center  5	4Ch
	{ 0x4D00, 0x4D36, 0x7400, 0x0000 }, // Right   6    4Dh
	{ 0x4E2B, 0x4E2B, 0x0000, 0x0000 }, // Gray +       4Eh
	{ 0x4F00, 0x4F31, 0x7500, 0x0000 }, // End     1	4Fh
	{ 0x5000, 0x5032, 0x0000, 0x0000 }, // Down    2	50h
	{ 0x5100, 0x5133, 0x7600, 0x0000 }, // PgDn    3  	51h
	{ 0x5200, 0x5230, 0x0000, 0x0000 }, // Ins     0  	52h
	{ 0x5300, 0x532E, 0x0000, 0x0000 }, // Del     .   	53h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // SysRq	    54h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, //              55h
	{ 0x565C, 0x567C, 0x0000, 0x0000 }, //              56h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // F11  		57h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }  // F12  		58h
};

__section(".legacy.kbdtbl")
const uint16_t translation_table_ext[][4] =
{
//    Normal  Shift   Ctrl    Alt          Key    KeySh Scan
    { 0x0000, 0x0000, 0x0000, 0x0000 }, //
    { 0x011B, 0x011B, 0x011B, 0x0100 }, // ESC
	{ 0x0231, 0x0221, 0x0000, 0x7800 }, // 1      !	    02h
	{ 0x0332, 0x0340, 0x0300, 0x7900 },	// 2	  @	    03h
	{ 0x0433, 0x0423, 0x0000, 0x7A00 },	// 3	  #	    04h
	{ 0x0534, 0x0524, 0x0000, 0x7B00 },	// 4	  $	    05h
	{ 0x0635, 0x0625, 0x0000, 0x7C00 },	// 5	  %	    06h
	{ 0x0736, 0x075E, 0x071E, 0x7D00 },	// 6	  ^     07h
	{ 0x0837, 0x0826, 0x0000, 0x7E00 },	// 7	  &     08h
	{ 0x0938, 0x092A, 0x0000, 0x7F00 },	// 8	  *     09h
	{ 0x0A39, 0x0A28, 0x0000, 0x8000 },	// 9      (	    0Ah
	{ 0x0B30, 0x0B29, 0x0000, 0x8100 },	// 0	  )	    0Bh
	{ 0x0C2D, 0x0C5F, 0x0C1F, 0x8200 },	// -	  _	    0Ch
	{ 0x0D3D, 0x0D2B, 0x0000, 0x8300 },	// =	  +	    0Dh
	{ 0x0E08, 0x0E08, 0x0E7F, 0x0E00 },	// Backspace    0Eh
	{ 0x0F09, 0x0F00, 0x9400, 0xA500 },	// Tab		    0Fh
	{ 0x1071, 0x1051, 0x1011, 0x1000 },	// q	  Q	    10h
	{ 0x1177, 0x1157, 0x1117, 0x1100 }, // w	  W	    11h
	{ 0x1265, 0x1245, 0x1205, 0x1200 }, // e	  E	    12h
	{ 0x1372, 0x1352, 0x1312, 0x1300 }, // r	  R	    13h
	{ 0x1474, 0x1454, 0x1414, 0x1400 }, // t	  T	    14h
	{ 0x1579, 0x1559, 0x1519, 0x1500 }, // y	  Y	    15h
	{ 0x1675, 0x1655, 0x1615, 0x1600 }, // u	  U	    16h
	{ 0x1769, 0x1749, 0x1709, 0x1700 }, // i	  I	    17h
	{ 0x186F, 0x184F, 0x180F, 0x1800 }, // o	  O	    18h
	{ 0x1970, 0x1950, 0x1910, 0x1900 }, // p	  P	    19h
	{ 0x1A5B, 0x1A7B, 0x1A1B, 0x1A00 }, // [	  {	    1Ah
	{ 0x1B5D, 0x1B7D, 0x1B1D, 0x1B00 }, // ]	  }	    1Bh
	{ 0x1C0D, 0x1C0D, 0x1C0A, 0x1C00 }, // Enter        1Ch
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // Ctrl		    1Dh
	{ 0x1E61, 0x1E41, 0x1E01, 0x1E00 }, // a	  A	    1Eh
	{ 0x1F73, 0x1F53, 0x1F13, 0x1F00 }, // s	  S	    1Fh
	{ 0x2064, 0x2044, 0x2004, 0x2000 }, // d	  D	    20h
	{ 0x2166, 0x2146, 0x2106, 0x2100 }, // f	  F	    21h
	{ 0x2267, 0x2247, 0x2207, 0x2200 }, // g	  G	    22h
	{ 0x2368, 0x2348, 0x2308, 0x2300 }, // h	  H	    23h
	{ 0x246A, 0x244A, 0x240A, 0x2400 }, // j	  J	    24h
	{ 0x256B, 0x254B, 0x250B, 0x2500 }, // k	  K	    25h
	{ 0x266C, 0x264C, 0x260C, 0x2600 }, // l	  L	    26h
	{ 0x273B, 0x273A, 0x0000, 0x2700 }, // ;	  :	    27h
	{ 0x2827, 0x2822, 0x0000, 0x2800 }, // '	  "	    28h
	{ 0x2960, 0x297E, 0x0000, 0x2900 }, // `	  ~	    29h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // LShift	    2Ah
	{ 0x2B5C, 0x2B7C, 0x2B1C, 0x0000 }, // \	  |	    2Bh
	{ 0x2C7A, 0x2C5A, 0x2C1A, 0x2C00 }, // z	  Z	    2Ch
	{ 0x2D78, 0x2D58, 0x2D18, 0x2D00 }, // x	  X	    2Dh
	{ 0x2E63, 0x2E43, 0x2E03, 0x2E00 }, // c	  C	    2Eh
	{ 0x2F76, 0x2F56, 0x2F16, 0x2F00 }, // v	  V	    2Fh
	{ 0x3062, 0x3042, 0x3002, 0x3000 }, // b	  B	    30h
	{ 0x316E, 0x314E, 0x310E, 0x3100 }, // n	  N	    31h
	{ 0x326D, 0x324D, 0x320D, 0x3200 }, // m	  M	    32h
	{ 0x332C, 0x333C, 0x0000, 0x3300 }, // ,	  <	    33h
	{ 0x342E, 0x343E, 0x0000, 0x3400 }, // .	  >	    34h
	{ 0x352F, 0x353F, 0x0000, 0x0000 }, // /	  ?	    35h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // RShift	    36h
	{ 0x372A, 0x372A, 0x9600, 0x3700 }, // *	  PrtSc 37h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // Alt		    38h
	{ 0x3920, 0x3920, 0x3920, 0x3920 },	// Space        39h
	{ 0x0000, 0x0000, 0x0000, 0x0000 },	// Capslock     3Ah
	{ 0x3B00, 0x5400, 0x5E00, 0x6800 }, // F1	  	    3Bh
	{ 0x3C00, 0x5500, 0x5F00, 0x6900 }, // F2	  	    3Ch
	{ 0x3D00, 0x5600, 0x6000, 0x6A00 }, // F3	  	    3Dh
	{ 0x3E00, 0x5700, 0x6100, 0x6B00 }, // F4	  	    3Eh
	{ 0x3F00, 0x5800, 0x6200, 0x6C00 }, // F5	  	    3Fh
	{ 0x4000, 0x5900, 0x6300, 0x6D00 }, // F6	  	    40h
	{ 0x4100, 0x5A00, 0x6400, 0x6E00 }, // F7		    41h
	{ 0x4200, 0x5B00, 0x6500, 0x6F00 }, // F8		    42h
	{ 0x4300, 0x5C00, 0x6600, 0x7000 }, // F9		    43h
	{ 0x4400, 0x5D00, 0x6700, 0x7100 }, // F10	  	    44h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // NumLock	    45h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // ScrollLock   46h
	{ 0x4700, 0x4737, 0x7700, 0x0000 }, // Home	  7	    47h
	{ 0x4800, 0x4838, 0x8D00, 0x0000 }, // Up 	  8	    48h
	{ 0x4900, 0x4900, 0x8400, 0x0000 }, // PgUp	  9	    49h
	{ 0x4A2D, 0x4A2D, 0x0000, 0x0000 }, // Gray   -	    4Ah
	{ 0x4B00, 0x4B37, 0x7300, 0x0000 }, // Left	  4	    4Bh
	{ 0x4CF0, 0x4C35, 0x0000, 0x0000 }, // Center 5	    4Ch
	{ 0x4D00, 0x4D36, 0x7400, 0x0000 }, // Right  6     4Dh
	{ 0x4E2B, 0x4E2B, 0x0000, 0x0000 }, // Gray   +	    4Eh
	{ 0x4F00, 0x4F31, 0x7500, 0x0000 }, // End	  1	    4Fh
	{ 0x5000, 0x5000, 0x0000, 0x0000 }, // Down	  2	    50h
	{ 0x5100, 0x5100, 0x7600, 0x0000 }, // PgDn	  3  	51h
	{ 0x5200, 0x5230, 0x0000, 0x0000 }, // Ins	  0  	52h
	{ 0x6000, 0x532E, 0x0000, 0x0000 }, // Del	  .   	53h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, // SysRq	    54h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, //              55h
	{ 0x0000, 0x0000, 0x0000, 0x0000 }, //              56h
	{ 0x8500, 0x8700, 0x8900, 0x8B00 }, // F11  		57h
    { 0x8600, 0x8800, 0x8A00, 0x8C00 }  // F12  		58h
};